<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Canvas Test</title>
</head>

<body>
    <button id="addCircle" type="button">Add circle</button>
    <button id="moveCircle" type="button">Move circle</button>
    <button id="zoomIn" type="button">+</button>
    <button id="zoomOut" type="button">-</button>

    <div style="height: 100vh; width:auto; margin: 2rem 2rem 2rem 2rem;">
        <canvas id="canvas" width="auto" height="auto" style="position: absolute; z-index: -2;"></canvas>
        <canvas id="canvas1" width="500" height="500" style="position: absolute; z-index: -1;"></canvas>
    </div>


    <script src="./jquery-3.6.0.min.js"></script>
    <script src="./jcanvas.min.js"></script>

    <script>
        function getRandomArbitrary(min, max) {
            return Math.random() * (max - min) + min;
        }

        $('#addCircle').click(function () {
            $('#canvas1').addLayer({
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#FF0000',
                strokeWidth: 2,
                x: getRandomArbitrary(0, 500),
                y: getRandomArbitrary(0, 500),
                radius: 24
            }).drawLayers();
        })

        $('#moveCircle').click(function () {
            $('#canvas1').setLayer('test', {
                x: getRandomArbitrary(0, 500),
                y: getRandomArbitrary(0, 500),
            }).drawLayers();
        })

        $('#zoomIn').click(function () {
            $('#canvas1').scaleCanvas({
                layer: true,
                scale: 1.1
            }).addLayer({
                type: 'image',
                source: "https://ychef.files.bbci.co.uk/976x549/p07ryyyj.jpg",
                x: 0,
                y: 0,
                width: 100,
                height: 100,
                fromCenter: false
            })
            .addLayer({
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#69f',
                strokeWidth: 2,
                x: 250,
                y: 100,
                radius: 25
            }).addLayer({
                name: "test",
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#F9E79F',
                strokeWidth: 2,
                x: 15,
                y: 250,
                radius: 25,
                change: function (layer, props) {},
                mouseover: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: "#6c3"
                    }, 500);
                },
                mouseout: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: '#fff'
                    }, 500);
                },
            })
            // Redraw layers to ensure correct ordering
            .drawLayers();
        })

        $('#zoomOut').click(function () {
            console.log("trying to zoom out")
            $('#canvas1').scaleCanvas({
                layer: true,
                scale: 0.8
            }).addLayer({
                type: 'image',
                source: "https://ychef.files.bbci.co.uk/976x549/p07ryyyj.jpg",
                x: 0,
                y: 0,
                width: 100,
                height: 100,
                fromCenter: false
            })
            .addLayer({
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#69f',
                strokeWidth: 2,
                x: 250,
                y: 100,
                radius: 25
            }).addLayer({
                name: "test",
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#F9E79F',
                strokeWidth: 2,
                x: 15,
                y: 250,
                radius: 25,
                change: function (layer, props) {},
                mouseover: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: "#6c3"
                    }, 500);
                },
                mouseout: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: '#fff'
                    }, 500);
                },
            })
            // Redraw layers to ensure correct ordering
            .drawLayers();


        })


        $('#canvas').drawImage({
            source: 'https://images.unsplash.com/photo-1552933529-e359b2477252?ixlib=rb-1.2.1&ixid=MnwxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8&auto=format&fit=crop&w=1000&q=80',
            x: 0,
            y: 0,
            width: 500,
            height: 500,
            fromCenter: false
        })



        $('#canvas1').addLayer({
                type: 'image',
                source: "https://ychef.files.bbci.co.uk/976x549/p07ryyyj.jpg",
                x: 0,
                y: 0,
                width: 100,
                height: 100,
                fromCenter: false
            })
            .addLayer({
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#69f',
                strokeWidth: 2,
                x: 250,
                y: 100,
                radius: 25
            }).addLayer({
                name: "test",
                type: 'arc',
                // fillStyle: '#69f',
                strokeStyle: '#F9E79F',
                strokeWidth: 2,
                x: 15,
                y: 250,
                radius: 25,
                change: function (layer, props) {},
                mouseover: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: "#6c3"
                    }, 500);
                },
                mouseout: function (layer) {
                    $(this).animateLayer(layer, {
                        fillStyle: '#fff'
                    }, 500);
                },
            })
            // Redraw layers to ensure correct ordering
            .drawLayers();
    </script>
</body>

</html>